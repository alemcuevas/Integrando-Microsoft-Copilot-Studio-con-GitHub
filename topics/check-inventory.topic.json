{
  "id": "check-inventory",
  "name": "CheckInventory",
  "displayName": "Verificar Inventario",
  "description": "Verifica la disponibilidad de productos en tienda y online",
  "triggerPhrases": [
    "Hay en stock",
    "Disponibilidad",
    "Tienen disponible",
    "EstÃ¡ disponible",
    "Hay existencias",
    "En inventario",
    "Verificar stock",
    "Comprobar disponibilidad",
    "Â¿Tienen en tienda?"
  ],
  "nodes": [
    {
      "id": "node1",
      "type": "MessageNode",
      "message": "Te ayudarÃ© a verificar la disponibilidad del producto. ğŸ“¦",
      "next": "node2"
    },
    {
      "id": "node2",
      "type": "QuestionNode",
      "question": "Â¿QuÃ© producto quieres verificar? Por favor indica el nombre o cÃ³digo del artÃ­culo.",
      "variable": "Topic.ProductToCheck",
      "inputType": "text",
      "next": "node3"
    },
    {
      "id": "node3",
      "type": "QuestionNode",
      "question": "Â¿En quÃ© ubicaciÃ³n te gustarÃ­a verificar la disponibilidad?",
      "entityType": "StoreLocation",
      "variable": "Topic.PreferredLocation",
      "options": [
        {
          "label": "ğŸª Tienda Centro",
          "value": "centro"
        },
        {
          "label": "ğŸª Tienda Norte",
          "value": "norte"
        },
        {
          "label": "ğŸª Tienda Sur",
          "value": "sur"
        },
        {
          "label": "ğŸª Tienda Este",
          "value": "este"
        },
        {
          "label": "ğŸª Tienda Oeste",
          "value": "oeste"
        },
        {
          "label": "ğŸŒ Tienda Online",
          "value": "online"
        },
        {
          "label": "ğŸ“ Todas las ubicaciones",
          "value": "all"
        }
      ],
      "next": "node4"
    },
    {
      "id": "node4",
      "type": "MessageNode",
      "message": "Verificando disponibilidad de '{Topic.ProductToCheck}' en {Topic.PreferredLocation}... â³",
      "next": "node5"
    },
    {
      "id": "node5",
      "type": "ActionNode",
      "action": "CheckInventory",
      "parameters": {
        "product": "{Topic.ProductToCheck}",
        "location": "{Topic.PreferredLocation}"
      },
      "output": "Topic.InventoryStatus",
      "next": "node6"
    },
    {
      "id": "node6",
      "type": "ConditionNode",
      "condition": "{Topic.InventoryStatus.Available} = true",
      "ifTrue": "node7",
      "ifFalse": "node9"
    },
    {
      "id": "node7",
      "type": "MessageNode",
      "message": "Â¡Buenas noticias! âœ…\n\nğŸ“¦ **Producto**: {Topic.InventoryStatus.ProductName}\nğŸ“ **UbicaciÃ³n**: {Topic.PreferredLocation}\nâœ… **Estado**: Disponible\nğŸ“Š **Cantidad**: {Topic.InventoryStatus.Quantity} unidades en stock",
      "next": "node8"
    },
    {
      "id": "node8",
      "type": "QuestionNode",
      "question": "Â¿Te gustarÃ­a:\n\n1ï¸âƒ£ Ver el precio y promociones\n2ï¸âƒ£ Obtener la direcciÃ³n de la tienda\n3ï¸âƒ£ Reservar el producto\n4ï¸âƒ£ Verificar otro producto",
      "options": [
        {
          "label": "Ver precio",
          "value": "pricing",
          "redirectToTopic": "pricing-info"
        },
        {
          "label": "DirecciÃ³n de tienda",
          "value": "location",
          "redirectToTopic": "store-locations"
        },
        {
          "label": "Reservar producto",
          "value": "reserve",
          "next": "node11"
        },
        {
          "label": "Verificar otro producto",
          "value": "check_another",
          "next": "node2"
        }
      ]
    },
    {
      "id": "node9",
      "type": "MessageNode",
      "message": "Lo siento, actualmente este producto no estÃ¡ disponible en {Topic.PreferredLocation}. ğŸ˜”",
      "next": "node10"
    },
    {
      "id": "node10",
      "type": "ConditionNode",
      "condition": "{Topic.InventoryStatus.EstimatedRestock} != null",
      "ifTrue": "node12",
      "ifFalse": "node13"
    },
    {
      "id": "node11",
      "type": "MessageNode",
      "message": "Para reservar este producto, por favor comunÃ­cate directamente con la tienda:\n\nğŸ“ Tel: {Topic.InventoryStatus.StorePhone}\nğŸ“§ Email: {Topic.InventoryStatus.StoreEmail}\n\nO puedes hablar con uno de nuestros asesores ahora mismo.",
      "next": "node14"
    },
    {
      "id": "node12",
      "type": "MessageNode",
      "message": "ğŸ“… **Reabastecimiento estimado**: {Topic.InventoryStatus.EstimatedRestock}\n\nÂ¿Te gustarÃ­a que verifiquemos la disponibilidad en otras tiendas o que te notifiquemos cuando estÃ© disponible?",
      "next": "node15"
    },
    {
      "id": "node13",
      "type": "MessageNode",
      "message": "No tenemos informaciÃ³n sobre cuÃ¡ndo estarÃ¡ disponible nuevamente.\n\nÂ¿Te gustarÃ­a que verifiquemos en otras ubicaciones o te mostremos productos similares?",
      "next": "node15"
    },
    {
      "id": "node14",
      "type": "QuestionNode",
      "question": "Â¿Deseas hablar con un asesor?",
      "options": [
        {
          "label": "SÃ­, conectar con asesor",
          "value": "yes",
          "redirectToTopic": "escalation"
        },
        {
          "label": "No, gracias",
          "value": "no",
          "next": "node16"
        }
      ]
    },
    {
      "id": "node15",
      "type": "QuestionNode",
      "question": "Â¿QuÃ© prefieres?",
      "options": [
        {
          "label": "Verificar en otras tiendas",
          "value": "other_stores",
          "next": "node17"
        },
        {
          "label": "Ver productos similares",
          "value": "similar",
          "redirectToTopic": "recommendations"
        },
        {
          "label": "Notificarme cuando estÃ© disponible",
          "value": "notify",
          "next": "node18"
        }
      ]
    },
    {
      "id": "node16",
      "type": "MessageNode",
      "message": "Â¿Hay algo mÃ¡s en lo que pueda ayudarte? ğŸ˜Š"
    },
    {
      "id": "node17",
      "type": "ActionNode",
      "action": "CheckInventoryAllLocations",
      "parameters": {
        "product": "{Topic.ProductToCheck}"
      },
      "output": "Topic.AllLocationsInventory",
      "next": "node19"
    },
    {
      "id": "node18",
      "type": "QuestionNode",
      "question": "Para notificarte cuando el producto estÃ© disponible, necesito tu email:",
      "variable": "Topic.CustomerEmail",
      "inputType": "email",
      "next": "node20"
    },
    {
      "id": "node19",
      "type": "MessageNode",
      "message": "ğŸ“ **Disponibilidad en todas nuestras tiendas**:\n\n{Topic.AllLocationsInventory}",
      "next": "node8"
    },
    {
      "id": "node20",
      "type": "MessageNode",
      "message": "Â¡Perfecto! Te enviaremos una notificaciÃ³n a {Topic.CustomerEmail} cuando '{Topic.ProductToCheck}' estÃ© disponible. ğŸ“§âœ…",
      "next": "node16"
    }
  ],
  "isSystem": false,
  "language": "es-ES"
}