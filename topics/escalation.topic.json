{
  "id": "escalation",
  "name": "Escalation",
  "displayName": "Escalamiento a Agente Humano",
  "description": "Transfiere la conversaciÃ³n a un agente humano cuando sea necesario",
  "triggerPhrases": [
    "Hablar con un humano",
    "Agente humano",
    "Persona real",
    "Asesor",
    "Representante",
    "Ayuda de verdad",
    "No me estÃ¡s ayudando",
    "Quiero hablar con alguien",
    "Transferir",
    "Comunicarme"
  ],
  "nodes": [
    {
      "id": "node1",
      "type": "MessageNode",
      "message": "Entiendo que necesitas ayuda mÃ¡s especializada. Te conectarÃ© con uno de nuestros asesores. ğŸ‘¤",
      "next": "node2"
    },
    {
      "id": "node2",
      "type": "QuestionNode",
      "question": "Para ayudarte mejor, Â¿podrÃ­as indicarme tu nombre?",
      "variable": "Topic.CustomerName",
      "inputType": "text",
      "next": "node3"
    },
    {
      "id": "node3",
      "type": "QuestionNode",
      "question": "Gracias, {Topic.CustomerName}. Â¿CuÃ¡l es tu correo electrÃ³nico para seguimiento?",
      "variable": "Topic.CustomerEmail",
      "inputType": "email",
      "next": "node4"
    },
    {
      "id": "node4",
      "type": "QuestionNode",
      "question": "Â¿PodrÃ­as describirme brevemente en quÃ© necesitas ayuda?",
      "variable": "Topic.IssueDescription",
      "inputType": "text",
      "next": "node5"
    },
    {
      "id": "node5",
      "type": "MessageNode",
      "message": "Perfecto, {Topic.CustomerName}. He registrado tu solicitud:\n\nğŸ“§ Email: {Topic.CustomerEmail}\nğŸ“ Consulta: {Topic.IssueDescription}",
      "next": "node6"
    },
    {
      "id": "node6",
      "type": "QuestionNode",
      "question": "Â¿CÃ³mo prefieres que te contactemos?",
      "options": [
        {
          "label": "ğŸ’¬ Chat en vivo ahora",
          "value": "chat"
        },
        {
          "label": "ğŸ“ Llamada telefÃ³nica",
          "value": "phone"
        },
        {
          "label": "ğŸ“§ Correo electrÃ³nico",
          "value": "email"
        },
        {
          "label": "ğŸ’¬ WhatsApp",
          "value": "whatsapp"
        }
      ],
      "variable": "Topic.ContactMethod",
      "next": "node7"
    },
    {
      "id": "node7",
      "type": "ConditionNode",
      "condition": "{Topic.ContactMethod} = 'chat'",
      "ifTrue": "node8",
      "ifFalse": "node9"
    },
    {
      "id": "node8",
      "type": "MessageNode",
      "message": "Â¡Perfecto! Estoy transfiriendo tu conversaciÃ³n a un agente disponible...\n\nâ±ï¸ Tiempo de espera aproximado: 2-3 minutos\n\nPor favor, no cierres esta ventana. Un asesor te atenderÃ¡ pronto. ğŸ™‚",
      "next": "node11"
    },
    {
      "id": "node9",
      "type": "ConditionNode",
      "condition": "{Topic.ContactMethod} = 'phone'",
      "ifTrue": "node10",
      "ifFalse": "node12"
    },
    {
      "id": "node10",
      "type": "QuestionNode",
      "question": "Â¿CuÃ¡l es tu nÃºmero telefÃ³nico para que te contactemos?",
      "variable": "Topic.CustomerPhone",
      "inputType": "text",
      "next": "node13"
    },
    {
      "id": "node11",
      "type": "ActionNode",
      "action": "TransferToAgent",
      "parameters": {
        "customerName": "{Topic.CustomerName}",
        "customerEmail": "{Topic.CustomerEmail}",
        "issueDescription": "{Topic.IssueDescription}",
        "conversationHistory": "{System.ConversationHistory}"
      }
    },
    {
      "id": "node12",
      "type": "ConditionNode",
      "condition": "{Topic.ContactMethod} = 'whatsapp'",
      "ifTrue": "node14",
      "ifFalse": "node15"
    },
    {
      "id": "node13",
      "type": "MessageNode",
      "message": "Excelente, {Topic.CustomerName}. \n\nğŸ“ Un asesor te llamarÃ¡ al {Topic.CustomerPhone} en los prÃ³ximos 15-30 minutos.\n\nğŸ“§ TambiÃ©n recibirÃ¡s un email de confirmaciÃ³n en {Topic.CustomerEmail}.\n\nğŸ« Tu nÃºmero de ticket es: #{System.GenerateTicketNumber}\n\nÂ¿Hay algo mÃ¡s en lo que pueda ayudarte mientras esperas?"
    },
    {
      "id": "node14",
      "type": "QuestionNode",
      "question": "Â¿CuÃ¡l es tu nÃºmero de WhatsApp?",
      "variable": "Topic.WhatsAppNumber",
      "inputType": "text",
      "next": "node16"
    },
    {
      "id": "node15",
      "type": "MessageNode",
      "message": "Perfecto. Un asesor responderÃ¡ tu consulta por correo electrÃ³nico en las prÃ³ximas 2-4 horas.\n\nğŸ“§ Enviaremos la respuesta a: {Topic.CustomerEmail}\nğŸ« Tu nÃºmero de ticket es: #{System.GenerateTicketNumber}\n\nÂ¡Gracias por tu paciencia! ğŸ˜Š"
    },
    {
      "id": "node16",
      "type": "MessageNode",
      "message": "Â¡Listo! Un asesor te escribirÃ¡ por WhatsApp al {Topic.WhatsAppNumber} en breve.\n\nğŸ“§ TambiÃ©n recibirÃ¡s confirmaciÃ³n en: {Topic.CustomerEmail}\nğŸ« NÃºmero de ticket: #{System.GenerateTicketNumber}\n\nğŸ’¬ Tiempo estimado de respuesta: 10-20 minutos\n\nÂ¿Necesitas ayuda con algo mÃ¡s?"
    }
  ],
  "isSystem": true,
  "language": "es-ES"
}